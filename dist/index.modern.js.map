{"version":3,"file":"index.modern.js","sources":["../index.ts"],"sourcesContent":["import plugin from 'tailwindcss/plugin';\n\ntype Options = Record<string, any>;\n\nexport default plugin.withOptions(function (options: Options = {}) {\n  return function ({ matchUtilities, theme, config }) {\n    const context = {\n      theme,\n      config,\n      ...(options ?? {}),\n    };\n    matchUtilities({\n      js: (value) => {\n        const escape = (str: string) => {\n          return str.replace(/_/g, '\\\\_').replace(/ /g, '_');\n        };\n\n        const unescape = (str: string) => {\n          return str.replace(/(?<!\\\\)_/g, ' ').replace(/\\\\_/g, '_');\n        };\n\n        const parseString = (str: string) => {\n          return str.split(/(#{.*?})/g).map((el, i) => (i % 2 === 1 ? el.slice(2, -1) : el));\n        };\n\n        const parts = parseString(escape(value.slice(1, -1)));\n\n        const utility = parts\n          .map((part, i) => {\n            if (i % 2 === 0) {\n              return part;\n            } else {\n              const args = Object.keys(context);\n              const values = Object.values(context);\n              const func = new Function(...args, `return ${unescape(part)};`);\n              return escape(`${func(...values)}`);\n            }\n          })\n          .join('');\n\n        return {\n          [`@apply ${utility}`]: {},\n        };\n      },\n    });\n  };\n});\n"],"names":["index","plugin","withOptions","options","matchUtilities","theme","config","context","_extends","js","value","escape","str","replace","utility","slice","split","map","el","i","part","args","Object","keys","values","func","Function","join"],"mappings":"sQAIA,IAAAA,EAAeC,EAAOC,YAAY,SAAUC,EAAmB,CAAA,GAC7D,OAAiB,UAAAC,eAAEA,EAAcC,MAAEA,EAAKC,OAAEA,IACxC,MAAMC,EAAOC,EACXH,CAAAA,QACAC,UACIH,MAAAA,EAAAA,EAAW,CAAA,GAEjBC,EAAe,CACbK,GAAKC,IACH,MAAMC,EAAUC,GACPA,EAAIC,QAAQ,KAAM,OAAOA,QAAQ,KAAM,KAa1CC,EAFoBH,EAAOD,EAAMK,MAAM,GAAI,IAHpCC,MAAM,aAAaC,IAAI,CAACC,EAAIC,IAAOA,EAAI,GAAM,EAAID,EAAGH,MAAM,GAAI,GAAKG,GAM7ED,IAAI,CAACG,EAAMD,KACV,GAAIA,EAAI,GAAM,EACZ,OAAOC,EACF,CACL,MAAMC,EAAOC,OAAOC,KAAKhB,GACnBiB,EAASF,OAAOE,OAAOjB,GACvBkB,EAAO,IAAIC,YAAYL,EAAM,UAjBvBT,EAiB0CQ,EAhBnDR,EAAIC,QAAQ,YAAa,KAAKA,QAAQ,OAAQ,SAiBjD,OAAOF,EAAO,GAAGc,KAAQD,KAC1B,CAnBaZ,KAmBb,GAEFe,KAAK,IAER,MAAO,CACL,CAAW,UAAAb,KAAY,MAI/B,CACF"}